"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[355],{3355:(t,e,a)=>{a.r(e),a.d(e,{default:()=>i});const s={data:function(){return{event:null,category_id:null}},methods:{getEvent:function(t){var e=this;this.$spinner.show(),axios.get("/api/events/"+t).then((function(t){e.event=t.data.data,e.$notify({title:"success",text:t.data.message})})).catch((function(t){e.$notify({title:"Error",text:t.message})})).finally((function(t){e.$spinner.hide()}))},process:function(){"single"!=this.event.pricing?this.$modal.show("categories-modal"):this.initPayment()},initPayment:function(){var t=this;if("single"==this.event.pricing||this.category_id){this.$modal.hide("categories-modal"),this.$spinner.show();var e={event_id:this.event.id,category_id:this.category_id};console.log("Data",e),axios.post("/api/tickets/buy",e).then((function(e){t.$notify({type:e.data.status?"success":"warn",text:e.data.message}),e.data.status&&e.data.data.link&&(localStorage.setItem("event_id",t.event.id),localStorage.setItem("paymentFor","ticket"),window.location.href=e.data.data.link)})).catch((function(e){t.$notify({type:"error",text:e.message})})).finally((function(){t.$spinner.hide()}))}else this.$notify({type:"warn",text:"Please select Ticket Category"})}},mounted:function(){this.getEvent(this.$route.params.id)}};const i=(0,a(1900).Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("modal",{attrs:{name:"categories-modal",adaptive:!0}},[a("div",{staticClass:"card h-100"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.initPayment.apply(null,arguments)},keydown:function(e){return t.form.onKeydown(e)}}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Ticket Category")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.category_id,expression:"category_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.category_id=e.target.multiple?a:a[0]}}},t._l(t.event.ticketCategories,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n\t\t        \t\t\t\t\t"+t._s(e.name)+"\n\t\t        \t\t\t\t")])})),0)])]),t._v(" "),a("div",{staticClass:"card-footer text-right"},[a("button",{staticClass:"btn btn-danger"},[t._v("\n\t        \t\t\t\tContinue\n\t        \t\t\t")])])])])]),t._v(" "),a("div",{staticClass:"card border-0 mb-4",staticStyle:{"border-radius":"16px"}},[t.event?a("div",{staticClass:"card-body"},[a("p",{staticClass:"card-title"},[t._v("Details")]),t._v(" "),a("p",{staticClass:"mb-4"},[a("span",{staticClass:"small text-muted"},[t._v("Title")]),t._v(" "),a("br"),t._v("\n\t\t\t\t\t"+t._s(t.event.name)+"\n\t\t\t\t")]),t._v(" "),a("p",{staticClass:"mb-4"},[a("span",{staticClass:"small text-muted"},[t._v("Date")]),t._v(" "),a("br"),t._v("\n\t\t\t\t\t"+t._s(t.event.event_date)+"\n\t\t\t\t")]),t._v(" "),a("p",{staticClass:"mb-4"},[a("span",{staticClass:"small text-muted"},[t._v("Available Tickets")]),t._v(" "),a("br"),t._v("\n\t\t\t\t\t"+t._s(t.event.tickets-t.event.tickets_purchased)+"\n\t\t\t\t")])]):t._e()]),t._v(" "),a("div",{staticClass:"card border-0 mb-4"},[t.event?a("div",{staticClass:"card-body"},[a("p",{staticClass:"card-title"},[t._v("Pricing")]),t._v(" "),a("div",[a("p",[a("span",{staticClass:"small text-muted"},[t._v("Price Type")]),t._v(" "),a("br"),t._v("\n\t\t\t\t\t\t"+t._s(t.event.pricing)+"\n\t\t\t\t\t")])]),t._v(" "),a("div",t._l(t.event.ticketCategories,(function(e){return a("p",{key:e.id,staticClass:"mb-4"},[a("span",{staticClass:"small text-muted"},[t._v(t._s(e.name))]),t._v(" "),a("br"),t._v("\n\t\t\t\t\t\tâ‚¦"+t._s(e.price)+"\n\t\t\t\t\t")])})),0),t._v(" "),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger btn-sm",on:{click:t.process}},[t._v("Buy Ticket")])])]):t._e()])],1)}),[],!1,null,null,null).exports}}]);