"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[29],{5029:(t,e,o)=>{o.r(e),o.d(e,{default:()=>s});const r={name:"TicketPriceCategory",props:{index:Number},methods:{updateCategory:function(t){var e=t.target,o=$(e).val();this.$emit("updateCategory",o,this.index)},updatePrice:function(t){var e=t.target,o=$(e).val();this.$emit("updatePrice",o,this.index)},closeSection:function(){this.$emit("closeSection",this.index)}}};var i=o(1900);const a={data:function(){return{id:"",editMode:!1,form:new Form({name:"",type:"",date:"",price:"",tickets:"",description:"",isFree:!1,pricing:"",ticketCategories:[{name:"",price:0}]})}},components:{PriceCategory:(0,i.Z)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"card mb-4 bg-light px-2"},[o("p",{staticClass:"px-3"},[o("button",{staticClass:"btn btn-danger btn-sm float-right",on:{click:t.closeSection}},[o("i",{staticClass:"fas fa-trash-alt",attrs:{type:"button"}})])]),t._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-6"},[o("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Category Name"},on:{blur:t.updateCategory}})]),t._v(" "),o("div",{staticClass:"col-6"},[o("input",{staticClass:"form-control",attrs:{type:"number",placeholder:"Price"},on:{blur:t.updatePrice}})])])])])}),[],!1,null,null,null).exports},methods:{create:function(){var t=this;this.$spinner.show(),this.form.post("/api/events").then((function(e){t.$notify({type:"success",text:e.data.message}),t.form.reset()})).catch((function(e){console.log("Error",e),t.$notify({type:"error",text:e.message})})).finally((function(){t.$spinner.hide()}))},update:function(){var t=this;this.form.patch("/api/events/"+this.id).then((function(e){t.form.reset(),swal(e.data.message)})).catch((function(e){t.$notify({text:e.message})}))},loadEvent:function(t){var e=this;axios.get("/api/events/"+t).then((function(t){e.form.fill(t.data.data)})).catch((function(t){e.$notify({text:t.message}),console.log(t)}))},toggleMode:function(t){this.form.isFree=t.value},updateTicketCategory:function(t){console.log("Data",t.target.value)},addSection:function(){this.form.ticketCategories.push({name:"",price:0})},updateCategory:function(t,e){this.form.ticketCategories[e].name=t},updatePrice:function(t,e){this.form.ticketCategories[e].price=t},closeSection:function(t){this.form.ticketCategories.splice(t,1)}},mounted:function(){this.$route.params.id&&(this.editMode=!0,this.id=this.$route.params.id,this.loadEvent(this.$route.params.id))}};const s=(0,i.Z)(a,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"card border-0",staticStyle:{"border-radius":"16px"}},[t.editMode?t._e():o("p",{staticClass:"card-title pt-3 px-3 h5 mb-0"},[t._v("Create an Event")]),t._v(" "),t.editMode?o("p",{staticClass:"card-title pt-3 px-3 h5 mb-0"},[t._v("Update an Event")]):t._e(),t._v(" "),o("div",{staticClass:"card-body"},[o("p",[o("span",{staticClass:"mr-2"},[t._v("Is Free:")]),t._v(" "),o("toggle-button",{attrs:{value:!1,labels:{checked:"Yes",unchecked:"No"}},on:{change:t.toggleMode}})],1),t._v(" "),o("form",{on:{submit:function(e){e.preventDefault(),t.editMode?t.update():t.create()},keydown:function(e){return t.form.onKeydown(e)}}},[o("div",{staticClass:"form-group"},[o("label",[t._v("Title")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{type:"text",required:"",placeholder:"Event Title"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t._v(" "),t.form.errors.has("name")?o("div",{domProps:{innerHTML:t._s(t.form.errors.get("name"))}}):t._e()]),t._v(" "),o("div",{staticClass:"form-group"},[o("label",[t._v("Ticket Numbers")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tickets,expression:"form.tickets"}],staticClass:"form-control",attrs:{type:"number",required:"",placeholder:"Number of Tickets"},domProps:{value:t.form.tickets},on:{input:function(e){e.target.composing||t.$set(t.form,"tickets",e.target.value)}}})]),t._v(" "),t.form.isFree?t._e():o("div",{staticClass:"form-group"},[o("label",[t._v("Ticket Price Category")]),t._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.form.pricing,expression:"form.pricing"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"pricing",e.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"single"}},[t._v("Single Price")]),t._v(" "),o("option",{attrs:{value:"multiple"}},[t._v("Multiple Prices")])])]),t._v(" "),"single"==t.form.pricing?o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.price,expression:"form.price"}],staticClass:"form-control",attrs:{type:"number",required:"",placeholder:"Ticket Price"},domProps:{value:t.form.price},on:{input:function(e){e.target.composing||t.$set(t.form,"price",e.target.value)}}})]):t._e(),t._v(" "),"multiple"==t.form.pricing?o("div",{staticClass:"form-group bg-light"},[t._l(t.form.ticketCategories,(function(e,r){return o("price-category",{key:"S"+r,attrs:{index:r},on:{updateCategory:t.updateCategory,updatePrice:t.updatePrice,closeSection:t.closeSection}})})),t._v(" "),o("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.addSection}},[t._v("+ Add Section")])],2):t._e(),t._v(" "),o("div",{staticClass:"form-group"},[o("label",[t._v("Date")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.date,expression:"form.date"}],staticClass:"form-control",attrs:{type:"date",required:""},domProps:{value:t.form.date},on:{input:function(e){e.target.composing||t.$set(t.form,"date",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"form-group"},[o("label",[t._v("Type")]),t._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.form.type,expression:"form.type"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"type",e.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"open"}},[t._v("Open")]),t._v(" "),o("option",{attrs:{value:"close"}},[t._v("Closed")]),t._v(" "),o("option",{attrs:{value:"invitational"}},[t._v("Invitational")])])]),t._v(" "),o("div",{staticClass:"form-group"},[o("label",[t._v("Description")]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],staticClass:"form-control",attrs:{rows:"5",required:"",placeholder:"Description"},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}})]),t._v(" "),o("button",{staticClass:"btn btn-primary px-5 float-right",attrs:{disabled:t.form.busy}},[t.editMode?o("span",[t._v("Update Event")]):t._e(),t._v(" "),t.editMode?t._e():o("span",[t._v("Create Event")])])])])])])}),[],!1,null,null,null).exports}}]);